<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>添加新闻顶级分类</title>
		<link rel="stylesheet" href="/src/less/addNews.css" />
	</head>

	<body>
		<div class="main">
			<form id="newsClassForm" action="/api/newsClass" method="post" name="newsClassForm">
				<table class="table">
					<tr>
						<td width="100">*目录名称:</td>
						<input type="hidden" class="form-control" value="0" name="firstId" placeholder="url" />
						<td width="600"><input type="text" class="form-control" value="" name="directoryName" placeholder="频道显示目录名称,必须输入英文字母" /><input type="hidden" class="form-control" value="index.html" name="url" placeholder="url" /></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
					<tr>
						<td width="100">分类名称:</td>
						<td width="600">
							<input type="text" class="form-control" value="" name="subTitle" placeholder="分类名称" />
						</td>
						<td></td>
						<td></td>
					</tr>
					
						<td>title:</td>
						<td><input type="text" class="form-control" name="title" value="" placeholder="title" /></td>
						<td width="100"></td>
						<td></td>
					</tr>
					<tr>
						<td>keywords:</td>
						<td><input type="text" class="form-control" name="keywords" value="" placeholder="keywords" /></td>
						<td width="100"></td>
						<td></td>
					</tr>
					<tr>
						<td>description:</td>
						<td><input type="text" class="form-control" name="description" value="" placeholder="description" /></td>
						<td width="100"></td>
						<td></td>
					</tr>
					<tr>
						<td width="100">添加时间:</td>
						<td><input type="text" class="form-control" name="time" value="" placeholder="发布时间(该项自动填写,如要手动输入,请点击此表单)" onclick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})" readonly="readonly" /></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td class="btnLeft" colspan="3"><button type="submit" id="newsClassBtn" class="btn btn-md btn-success">添加</button>&nbsp;&nbsp;&nbsp;&nbsp;<button class="btn btn-md btn-default" type="reset">重置</button></td>
					</tr>
				</table>
			</form>
		</div>
		<script src="/src/lib/js/jquery-1.11.1.js" type="text/javascript" charset="utf-8"></script>
		<script src="/src/lib/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="/src/lib/js/jquery.validate.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="/src/lib/My97DatePicker/WdatePicker.js" type="text/javascript" charset="utf-8"></script>
		<script src="/src/js/common.js" type="text/javascript" charset="utf-8"></script>

		
		<script type="text/javascript">
			$(function() {
				//打开就加载新闻时间
				$("input[name='time']").val(getNowFormatDate());
			})
			
			
			//提交表单
			$("#newsClassForm").validataForm({
					rules: {
						directoryName:{
							required:true,
							english:true,
						},
						subTitle: "required",
						title:"required",
						keywords:"required",
						description:"required",
						time:"required"
					},
					messages: {
						directoryName: {
							required: "目录名必须填写",
							english:"必须输入英文字母"
						},
						subTitle: "分类标题不能为空",
						title:"分类title不能为空",
						keywords:"分类keywords不能为空",
						description:"分类description不能为空",
						time:"分类时间不能为空"
					}
				},
				function(e, form) {
					e.preventDefault();
					var action = $(form).attr('action');
					var form = $(form).serializeObject();
					$.ajax({
						url: action,
						type: 'post',
						data: form,
						success: function(res,success) {
							if(res&&res.code==500){
								alert(res.msg);
							}else{
								if(success=='success')
								alert("添加成功!");
								window.location.reload();
							}
						},
						error: function(err) {
							if(err) {
								alert(err.responseText)
							}
						}
					})
				})
			
			
			
		</script>
	</body>

</html>